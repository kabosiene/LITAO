!function(o,n,t,i){var e=function(t,i){this.elem=t,this.$elem=o(t),this.options=i,this.metadata=this.$elem.data("stickem-options"),this.$win=o(n)};e.defaults=(e.prototype={defaults:{item:".stickem",container:".stickem-container",stickClass:"stickit",endStickClass:"stickit-end",offset:0,start:0,onStick:null,onUnstick:null},init:function(){var t=this;return t.config=o.extend({},t.defaults,t.options,t.metadata),t.setWindowHeight(),t.getItems(),t.bindEvents(),t},bindEvents:function(){var t=this;t.$win.on("scroll.stickem",o.proxy(t.handleScroll,t)),t.$win.on("resize.stickem",o.proxy(t.handleResize,t))},destroy:function(){this.$win.off("scroll.stickem"),this.$win.off("resize.stickem")},getItem:function(t,i){var n=this,e=o(i),s={$elem:e,elemHeight:e.height(),$container:e.parents(n.config.container),isStuck:!1};n.windowHeight>s.elemHeight?(s.containerHeight=s.$container.outerHeight(),s.containerInner={border:{bottom:parseInt(s.$container.css("border-bottom"),10)||0,top:parseInt(s.$container.css("border-top"),10)||0},padding:{bottom:parseInt(s.$container.css("padding-bottom"),10)||0,top:parseInt(s.$container.css("padding-top"),10)||0}},s.containerInnerHeight=s.$container.height(),s.containerStart=s.$container.offset().top-n.config.offset+n.config.start+s.containerInner.padding.top+s.containerInner.border.top,s.scrollFinish=s.containerStart-n.config.start+(s.containerInnerHeight-s.elemHeight),s.containerInnerHeight>s.elemHeight&&n.items.push(s)):s.$elem.removeClass(n.config.stickClass+" "+n.config.endStickClass)},getItems:function(){var t=this;t.items=[],t.$elem.find(t.config.item).each(o.proxy(t.getItem,t))},handleResize:function(){this.getItems(),this.setWindowHeight()},handleScroll:function(){var t=this;if(0<t.items.length)for(var i=t.$win.scrollTop(),n=0,e=t.items.length;n<e;n++){var s=t.items[n];s.isStuck&&(i<s.containerStart||i>s.scrollFinish)||i>s.scrollFinish?(s.$elem.removeClass(t.config.stickClass),i>s.scrollFinish&&s.$elem.addClass(t.config.endStickClass),s.isStuck=!1,t.config.onUnstick&&t.config.onUnstick(s)):!1===s.isStuck&&i>s.containerStart&&i<s.scrollFinish&&(s.$elem.removeClass(t.config.endStickClass).addClass(t.config.stickClass),s.isStuck=!0,t.config.onStick&&t.config.onStick(s))}},setWindowHeight:function(){var t=this;t.windowHeight=t.$win.height()-t.config.offset}}).defaults,o.fn.stickem=function(t){return this.destroy=function(){this.each(function(){new e(this,t).destroy()})},this.each(function(){new e(this,t).init()})}}(jQuery,window,document);